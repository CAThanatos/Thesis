\chapter{Models in Evolutionary Biology and Evolutionary Robotics}
\label{chapter:model}

\epigraph{\textit{So far, we have been able to study only one evolving system and we cannot wait for interstellar flight to provide us with a second. If we want to discover generalizations about evolving systems, we will have to look at artificial ones.}}{--- \textup{John Maynard Smith}}

\minitoc[n] % minitoc without title

In the first part of the manuscript, our goal is to model the proximate mechanisms in the evolution of coordination and study their impact on the ultimate emergence of cooperation. As in most fields of science, modeling is a standard approach to study question that cannot be understood by simply observing the physical world. Everything that we now contemplate is the consequence of thousands of millions of years of evolution; the earliest appaerance of life is dated back to $4000$ millions years ago and a little more than $2000$ millions for the eukaryotes. This means that we are mostly left with evidence from the past (i.e. paleontological records)~\parencite{Aiello1995, Wrangham1999} or direct observation of evolved behaviours (i.e. ethology). Evolution can also be studied as it is taking place in organisms where it is a much faster process, like microorganisms\footnote{On that subject, a noteworthy experiment is that of Richard Lenski's "Long-Term Evolution Experiment" on Escherichia coli~\parencite{Fox2015}, where he set up in 1988 $12$ populations of the same strain of E. coli and observed their evolution since then.}~\parencite{Elena2003}. However, while empirical works can indeed study the proximate mechanisms of cooperation, they do not inform on the ultimate evolution of behaviours and are not sufficient on their own to garner a full understanding of the process. Thus models are now commonly accepted in the realm of evolutionary biology, even if this may not have always been the case~\parencite{Shou2015}. 

As said in the Introduction of this manuscript, we choose evolutionary robotics as our modeling technique for the problem studied. However, we only briefly justified this choice. Thus, the next Sections will be devoted to this task. We will first focus on the different modeling approaches used in the field of evolutionary biology. To that end, we will distinguish between the more classical methods of modeling evolution and the computational methods that arose with the availability of computers. Rather than doing an extensive review overview of models, we will present the relevance and benefits of these models with regards to our subject. This will finally give us the opportunity to motivate our approach in evolutionary robotics in light of the set of models available and the problem studied in this thesis.


% \section{Why Model the Evolution of Cooperation}

%     While our aim is the modeling of coordination, in this Subsection we are interested in briefly reviewing the more empirical studies of evolution. In this way, our goal is thus to motivate the need to use models in understanding evolutionary phenomona.

%     Everything that we contemplate now is the consequence of thousands of millions years of evolution; the earliest appearance of life is dated to $4000$ millions years ago and a little more than $2000$ millions for the eukaryotes. The time scales involved in the evolutionary process are such that we cannot directly observe evolution but rather to piece together how it could have taken place. This means that we are mostly left with evidences from the past. In consequences, a large part of our empirical understanding comes from paleontologists. A copious amount of work in particular has been dedicated to studying the social life of our hominin ancestors. For example, paleontological records have been used to learn about the diet of early hominins. In particular, those records reveal a strong correlation in our ancestors between the switch to a more energy-rich diet (e.g. meat) and the increase in the brain size of these ancestors~\parencite{Aiello1995, Wrangham1999}.

%     This correlation could hint towards coevolution between the transition to a rich diet and the appearance of social behaviours (which are sometimes argued to require higher brain functions~\parencite{Dunbar2007, Isler2012}). Explanations on how exactly this transition shaped cooperation are diverse~\parencite{Pontzer2012}. Some think that this new diet could allow to adopt more diverse and more efficient hunting and scavenging techniques. Indeed, a richer diet would be necessary to develop the locomotive and cognitive skills necessary for both of these activities~\parencite{Aiello1995, Bramble2004}. Others argue that a shift in climatic conditions led the early hominins to rely more on underground storage organs. While this type of food is rich and available even under arid climate, its harvesting is difficult. This drove selection for the capacity to share food among individuals, thus leading to cooperation~\parencite{OConnell2002}. It is also believed that it led to the emergence of cooking which implied a physical location where individuals would meet and thus create social dynamics~\parencite{Wrangham1999, Wrangham2009}. However, those paleontological evidence do not fare well when trying to understand the proximate mechanisms at play. In particular, it may be difficult to distinguish between the actual causes of the origin of a given evolutionary trait and other phenomena with which its emergence may be correlated. Neither is it easy to come up with general mechanisms for the evolution of cooperation based on these records. For example, the relation between higher brain size and cooperative capabilities (i.e. the social brain hypothesis~\parencite{Dunbar2007}) is now widely debated in evolutionary biology and do not hold under a wider study of social animals~\parencite{Finarelli2009}. 

%     Most of the empirical work on cooperation is achieved by observing animal behaviours (i.e. ethology). In particular, it is argued that it is possible to come with essential explanations of the evolution of sociality in humans by studying that of non-humans. For example, persuasive links have been made between the evolution of cooperation in humans and in social carnivores~\parencite{Schaller1969, Smith2012a}.

%     %, another strong argument in favor of a correlation between the transition to a rich diet comprised of meat and the evolution of social behaviours.

%     As previously stated in the Introduction, most research on the evolution of cooperation have been focused altruism. And as such, a large body of work has been dedicated to finding evidence of kin selection in animals~\parencite{Bourke2014} and in eusocial insects in particular. Only $2\%$ of insect species are eusocial but they represent most of the insects biomass~\parencite{Wilson2008}. In particular, one particularily difficult phenomenon to explain is the presence of reproductive division of labour, where only a certain "caste" of individuals can reproduce~\parencite{Wilson1990}. Empirical works on eusocial insects have shown that colonies are composed of strongly related organisms. In particular, all members of the colony are offsprings of a single individual (i.e. the queen). This validated kin selection as a mechanism to explain the evolution of eusociality~\parencite{Queller1998}. Other empirical works have also investigated the influence of kin selection in vertebrates. In particular, it has been shown that in most cooperative species of birds and mammals, social groups are small and composed of dominant breeders and their relatives~\parencite{Dugatkin1997, Clutton-Brock2002}. In that case, kin selection was brought upon to explain inequalities in breeding between individuals of the same group (something called reproductive skew) and the rearing of youngs by individuals which are not their parents~\parencite{Bourke2011}. However, whereas kin selection is necessary to explain the evolution of altruism in eusociality, the importance of kin selection among vertebrates is much more debated~\parencite{Griffin2003, Clutton-Brock2002}.

%     Field studies on verterbrates have also focused on the role of direct fitness benefits in cooperation. As we previously mentioned, most cooperative actions are likely to generate a combination of both indirect and direct benefits~\parencite{Clutton-Brock2009}. Thus, it may be hard to accurately discriminate cooperative actions that produce direct benefits. However, the presence of intraspecific cooperation between unrelated individuals may only be explained by direct benefits to fitness. For example, spotted hyenas have been shown to cooperate with kin and non-kin alike to achieve collective hunting and defense against other predators~\parencite{Drea2009a, Smith2010, Smith2012a}. Thanks to field work on cooperative vertebrates, various hypothesis on how direct benefits are obtained through social interactions have been proposed~\parencite{Clutton-Brock2002}. For instance, the existence of cooperative breeding can be explained by group augmentation. This means that individuals have a direct benefit in the increase of group size: better protection against predators, more efficient gathering and defense of food and rearing of youngs~\parencite{Packer2001}. More generally, many cooperative actions can be maintained through mutual benefits. Primates are known to engage in mutual grooming and some birds build communal nests which directly benefit every participants. Also collective hunting can profit to every individuals by improving the product of the hunt and decreasing the risk (in terms of both physical risk and missed hunt)~\parencite{Scheel1991}. Cooperation has also been observed to be enforced through coercion, where non-cooperative individuals could suffer punishment or eviction from the group. Reciprocity~\parencite{Trivers1971}, where individuals cooperate with partners with which they previously interacted has often been proposed to explain cooperation between non-kin. However at the moment, there is no sufficient evidence that this type of behaviour occurs in other vertebrates than humans~\parencite{Hammerstein2003, Clutton-Brock2009, Andre2014}.

%     % Mainly good to confirm theoretical hypothesis ?

%     % Je mentionne peu les primates ici. Ca serait bien d'en parler très rapidement (après tout on apprend pas beaucoup de choses vraiment différentes (voir même moins qu'avec les hyènes d'après Drea2009a))

%     It is also worth briefly mentioning empirical studies on cooperation in humans. Human altruism has already been for long studied in economics and it gave rise to experiments that display the existence of altruistic cooperation between non-kins~\parencite{Fehr2002, Fehr2003a}. Altruism in human societies is best explained by a pattern of rewards, reputation and punishment. In particular, they showed the role of strong reciprocity between humans. While altruistic reciprocator will reward and punish individuals if they have a long-term interest~\parencite{Trivers1971}, strong reciprocators will do so in any case (i.e. in a stricly altruistic way). Additionally, some have also been interested in human coordination in mutualistic interactions. For example, Michael Alvard has studied traditional societies of whale hunters in Lamalera, Indonesia~\parencite{Alvard1999, Alvard2003}. In particular, he has shown that there is no significant relation between kinship and the strengh of cooperation in these societies. Alvard thus argues for mutualistic explanations for the evolution of coordinated actions. Moreoever, other studies have also been focused on the mechanisms with which humans coordinate to solve cooperation problems. For example, Bullinger and colleagues~\parencite{Bullinger2011, Duguid2014} have studied how exactly chimpanzees and human childs coordinate in a stag hunt type of game. They have mainly focused on the role of communication and leadership strategies between individuals.

%     % Fehr and Fischbacher~\parencite{Fehr2003a} argue that the evolution of human altruism cannot be only explained by gene-based evolutionary theory alone and advocate for gene-culture coevolution.

%     Lastly, we want to mention the subset of empirical work where cooperation is directly observed while it takes place. This can only done in organism where evolution is a fast process: microorganisms~\parencite{Elena2003}. For example, Richard Lenski conducts his "Long-Term Evolution Experiment" on Escherichia coli~\parencite{Fox2015}. This experiment began in 1988, when Lenski set up $12$ populations of the same strain of E. coli and observed their evolution since then. But more generally, bacteria regularly act in ways that can be caracterized as cooperative~\parencite{West2006}. We previously talked about public goods games in \emph{P. aeruginosas}. But some cells of the slime mould Dictyostelium discoideum have been observed to sacrifice themselves so that other cells can become spores and thus spread their genes~\parencite{Strassmann2000}. Microorganisms have thus often empirically validated kin selection and kin discrimination~\parencite{West2006}. In particular, while green beard mechanisms are thought to be rare, \emph{D. discoideum} are an exemple of this mechanisms. In this case, one gene encodes for individuals to stick to each other to cooperatively form fruiting bodies~\parencite{Queller2003}. But evidence of direct benefits between microorganisms have also been revealed. Mutualism (i.e. interspecific cooperation) is frequent with microorganisms by way of by-product benefits. Evidence of punishing behaviours have also been shown in mutualism between plants and bacteria, like between leguminous plants and the rhizobial bacteria~\parencite{Kiers2003}. In this mutualism, the bacteria fix $N_{2}$ (which is a costly action) that is then supplied to the plant. The plant enforces cooperation by decreasing the supply of $O_{2}$ given to the bacteria should it defect. 

%     %To conclude, it also interesting to note that there are pratical medical applications for studying the evolution of cooperation in microorganisms as there exists a correlation between cooperation and the virulence of bacteria strains~\parencite{Foster2005}.

%     In conclusion, empirical studies on the evolution of cooperation exist and are widespread. However, they rarely inform on the mechanistic constraints involved in the evolution of coordination: proximate explanations are difficult to understand when you can only observe the ultimate results of such a long process. In comparison, in the particular case of microorganisms, microbiologists are concerned with proximate explanations of cooperation~\parencite{West2006}. However, they do not offer the wide variety of coordination behaviours compared to what can be observed in bigger organisms. Moreover, cooperation in microorganisms is based in majority on kin selection mechanisms or interspecific mutualism.

%     % Parler de ce que dit Smith sur protection against predators ?
%     % Man the hunted

%     % Phylogénétique ?

\section{Classical Models in Evolutionary Biology}

    It is nowadays classical in evolutionary biology to model the evolution of cooperation (among other evolutionary traits). It is also necessary to do so to fully grasp the mechanisms at play. Models are thus numerous and a lot of different frameworks have been proposed to classify cooperative actions~\parencite{Dugatkin2002, Sachs2004, Lehmann2006}. To that end, mathematical models dominate the field~\parencite{Servedio2014}. 

    \subsection{Population Genetics}

        In particular, \emph{population genetics} form a large part of the literature in evolutionary biology. The inception of this field was mostly the result of Ronald Fisher, J.B.S. Haldane and Sewal Wright. Fisher was the first to link mendelian inheritance (i.e. the inheritance of biological traits) with mathematical models of natural selection in his book \textit{The Genetical Theory of Natural Selection}~\parencite{Fisher1930}. Population genetics is concerned with studying the changes in alleles' frequencies at a particular locus in the genotype. In particular, the focus is put on population wide variations of evolutionary traits within one or a few loci. As such, there has been a strong emphasis on studying genetic mechanisms like dominance, epistasis or genetic drift. A notable branch of this field, \emph{quantitative genetics} has in comparison been more focused on the phenotypical aspects of evolution. More precisely, quantitative genetics deal with continuously varying phenotypical trait. It thus abstracts from the genetic details of evolution. However, population and quantitative genetics both tend to abstract from the role of ecological features. Because these features are what we are interested in here, we choose not to focus more on the framework of population genetics.

    % -> Parler de kin selection ici
    % -> Good for ultimate explanations
    % -> Introduire modèles de Moran et Wright-Fisher ? (et probablement équation fondamentale de Fisher. En gros montrer à quel point c'est mathématique ET fondamentale) 

    % Reprendre la partie sur population genetics

    % Dire bien que pop gen ça nous intéresse pas vraiment vu qu'on s'intéresse au phénotype

    \subsection{Evolutionary Game Theory}

        \subsubsection{Matrix games}

            In comparison to population genetics, \emph{evolutionary game theory} (EGT) puts a strong emphasis on ecological aspects. Game theory was originally conceived by the mathematician John von Neumann as a way to determine the optimal strategies in a contest between several (usually two) "players". Given a payoff matrix, each player can expect a certain payoff depending on her strategy and that of other players. In this framework, players are expected to be rational and follow this optimal strategy. One of the most important concepts of game theory is the \emph{Nash equilibrium}~\parencite{Nash1950}. Under a Nash equilibrium, no player benefits in deviating from her strategy if the other players keep their strategy. This framework was first adapted to darwinian evolution by John Maynard Smith and George Price under the name of evolutionary game theory~\parencite{MaynardSmith1973}. The novel idea is that the players' strategies are based on their phenotypes rather than a rational choice. Therefore, an individual's strategy is now inherited and the evolutionary perspectives of the different strategies are studied. To that end, the payoff matrix of an evolutionary game corresponds to the fitness value of each strategy. In order to study the evolutionary dynamics of an evolutionary game, we consider a population of individuals all playing the same strategy. We then assume the appearance of a rare mutant who plays a different strategy and study the fate of these two strategies. If the strategy of the mutant has a higher fitness than that of the initial population (called the \emph{resident strategy}), then it may invade the population and replace the resident strategy. Otherwise, the mutant strategy will not be favoured by selection and will disappear. If this resident strategy is stable against any mutant strategy, we say that this strategy is evolutionarily stable (ESS)~\parencite{MaynardSmith1973}. Interestingly, all ESS are Nash equilibria (but the opposite may not hold).

            One of the main feature of evolutionary game theory in comparison to population genetics is that it takes into account the influence of an individual's behaviour on the fitness of others. More precisely, the fitness of an individual depends on the proportions and behaviours of other individuals in the population, which is known as \emph{frequency-dependent selection}. As such, EGT is convenient to account for the ecological features of a particular evolutionary phenomenon~\parencite{Hammerstein1994}. Because it represents conflictual and cooperative interactions, there is a great interest in using EGT for the study of the evolution of social behaviours~\parencite{Bshary2015}. One famous example is that of reciprocity in the \emph{Iterated Prisoner's Dilemma}~\parencite{Axelrod1984}. The prisoner's dilemma was already a famous game theoretic model but Axelrod \& Hamilton proposed that individuals play an iterated version of this game (of which you can find Axelrod \& Hamilton's payoff matrix in Table~\ref{table:payoffIPD}). To put it more simply, when individuals have engaged in one prisoner's dilemma interaction, there is a probability that they will meet again in a later interaction. They showed that, under those circumstances the evolutionarily stable strategy is one called \emph{Tit for Tat} (TFT). Under this strategy an individual always cooperate when meeting an opponent for the first time. It then always copy the opponent's last move which means that it (1) retaliates and (2) does not hold grudges. This strategy was thus presented as a theoretical example of reciprocity~\parencite{Trivers1971}. More generally, a large body of work has again been focused on the stability of altruism when faced with the appearance of free-riders (defectors) in the prisoner's dilemma~\parencite{Requejo2013a}.


            \begin{table}[ht]
            \centering
              \begin{tabular}{l|c|c}
                & Cooperation & Defection \\
                \hline
                Cooperation & 3,3 & 0,5 \\
                \hline
                Defection & 5,0 & 1,1 \\
                \hline
              \end{tabular}
              \caption{\textbf{Payoff matrix of the prisoner's dilemma.}
              The strategy of player A (resp. player B) is symbolized by each row (resp. column). The payoff of player A (resp. player B) is shown on the left (resp. right). This is the payoff matrix which was used by Axelrod \& Hamilton in their work on Tit for Tat in the prisoner's dilemma~\parencite{Axelrod1984}.}
            \label{table:payoffIPD}
            \end{table}


            In the case of coordination which we are interested in here, the prisoner's dilemma is not appropriate to model the evolutionary dynamics of cooperation~\parencite{Alvard2002, Skyrms2004}. As such, another type of games more suitable for this question was introduced as coordination games and in particular the stag hunt~\parencite{Skyrms2004, Requejo2013a}. The details of this game have already been covered in the Introduction. The major difference with the prisoner's dilemma is the presence of a second ESS as the cooperative equilibrium (i.e. stag hunting). Thus the emphasis of this game is not on the stability of a population of cooperators against the invasion of free-riders (as cooperation is stable once evolved) but on the transition from the solitary equilibrium to the cooperative one. In his original book, Skyrms mainly studied the influence of location, signaling and partner choice on the evolution of cooperators~\parencite{Skyrms2004}. However, coordination games like the stag hunt have received little attention, especially in comparison to the prisoner's dilemma~\parencite{Iyer2016}.

        % But the literature on coordination games is much smaller than that on the prisoner's dilemma, several works have ben interested on this subject~\parencite{Santos2006, Pacheco2009, Iyer2016}.

    % -> Mentionner les différents types de jeux ? (coordination games, PD etc... (ya un papier là-dessus))

        \subsubsection{Adaptive dynamics}

            In classical EGT (i.e. matrix games), strategies are discrete and generally constitute a finite list. In comparison, most evolutionary traits take values in a continuous domain. We can for example think about the size, flowering rate or investment and allocation of resources~\parencite{McGill2007}. In order to study the evolutionary dynamics of those traits, a continuous version of EGT rose as \emph{adaptive dynamics} (or continuous-trait game theory). This modeling technique can be seen as a way to combine quantitative genetics, by studying the rate of change of a population's strategy, and EGT, by applying the ecological aspect of frequency-dependent selection~\parencite{Geritz1998, McGill2007}. More precisely, adaptive dynamics extends on the main notion of EGT which is the evolutionary stable strategie. In particular, the concept of ESS as it exists in EGT lacks precise knowledge about the convergence of a given strategy. Namely, we know that an ESS may not be invaded by any mutant strategy once it has spread in the population. Yet, we do not know if this strategy will eventually become established given the initial conditions. This problem of convergence is represented by \emph{convergence stability}. Convergence stability implies that a strategy, thanks to multiple small evolutionary steps, will be able to fix in the population. Both concepts of evolutionary stability and convergence stability do not always come together~\parencite{Eshel1981, Eshel1983}. Behind convergence stability is the idea that the shape of the fitness landscape changes as the resident strategy changes. From this it stems that it may be impossible to evolve an ESS even when it represents a fitness maximum.

            Several key evolutionary concepts that could not be modeled by classical EGT have been introduced through the framework of adaptive dynamics. One such concept is that of "branching points". These occurs when a strategy is convergence stable but not evolutionarily stable~\parencite{Geritz1998}. Namely this strategy acts as an evolutionary attractor from afar but, because the fitness landscape changes as the resident strategy changes, this strategy may be a fitness minimum (and thus not ESS). These are called branching points because two different evolving population may coexist and evolve separately. Branching points have thus been used to model the evolution of speciation~\parencite{Geritz2004}. 

            %Coevolution has also been widely studied in this field, thanks to the modeling of frequency-dependence. In particular, some have been interested in the competitive coevolution of predators and preys and how branching points influence the apperance of ecological niches in these systems~\parencite{Bowers2003}. Cooperative coevolution (i.e. interspectific mutualism) has also been investigated. More precisely, one of the main questions is the incentive for cheaters to profit from the benefits of mutualistic interactions. Thus some have been interested in studying the stability of mutualism against cheating~\parencite{Ferriere2002, McGill2005}. Finally, it is without surprise that the evolution of altruism represents a fair share of research in adaptive dynamics. Most notably, the ecological modeling in adaptive dynamics (as in game theory in general) has allowed to study how dispersal could be a prominent mechanism to decrease kin competition, thus effectively enabling the evolution of altruism~\parencite{LeGalliard2003, LeGalliard2005}.

        \subsubsection{Proximate mechanisms in evolutionary game theory}

            Models in EGT represent a classic framework for the study of the evolution of cooperation. However, they make assumptions that we deem here critical in the evolution of mutualistic cooperation. In matrix games, it is often considered that any given strategy can evolve regardless of the resident strategy. In particular, the phenotype of a given individual is often simply modeled as either a "Cooperator" or a "Defector". As such a single mutation is sufficient to evolve one phenotype or the other. In the context of adaptive dynamics, the issue of converging towards a strategy under particular ecological context (i.e. convergence stability) is indeed studied. However, convergence is addressed under the assumption that the effect of mutations are small and that convergence is achieved through a series of small evolutionary steps.

            In both cases, these models make assumptions on the availability of mutations; they are considered not to be limiting and the mapping between the genotype and the phenotype is thus not explicitly modeled. As we already explained, the effect of such assumptions is not equivalent whether we are interested in the stability or the origin of cooperation. If we find a strategy to be an ESS when mutations are not limiting (i.e. any mutant can appear in the population), then this strategy is also an ESS under stronger limitations. In comparison, the evolution of such strategy may vary depending on the effect of mutations. In particular, there needs to be a succession of mutants which are favored by selection between the different equilibria. In consequence, the availability of mutants may be critical for the origin of cooperative traits. Because mutations affect the proximate mechanisms of behaviours, then the nature of these mechanisms is crucial to the appearance of cooperative mutants. In particular, this may be true when the ability to coordinate is necessary for cooperation to be beneficial. Therefore, we believe that there needs to be complementary models that consider these mechanisms of behaviours in the context of the evolution of cooperation. Namely, we are interested in models where the individuals are explicitly modeled and thus where minimal assumptions are made on mechanistic constraints in the mapping from genotype to phenotype.

            % Ca pourrait valoir le coup de mieux expliquer en quoi le mapping c'est en lien avec ce que je viens d'expliquer (pas plus d'une phrase)


% Parler plutôt de Computational Biology ? J'aime bien l'idée de parler de techniques de modélisations particulières qui s'inscrivent finalement dans cette opposition plus générale de Classical VS Computational
\section{Individual-Based Modeling}

    The mathematical models presented before are oftentimes labeled as "classical models"~\parencite{DeAngelis2005, Adami2014} and this is how we will refer to them in this manuscript. This term is not used in a derogatory fashion. Rather, this is a way to discriminate between the purely mathematical models which have been classical in evolutionary biology and a range of models which were born thanks to an easier access to computational power. This allowed to approach biological questions in a different direction that, some would argue, enables to go beyond what is possible with purely mathematical models~\parencite{Adami2012}. However, the line between classical and computational models can sometimes be not so easy to draw and there is a real scientific interest in trying to get the best of both worlds~\parencite{Wilson1998}. In our case, we are interested in the modeling of individuals so that we can really take into account the mechanistic constraints in the evolution of coordination behaviorus. As such, we now introduce the field of \emph{individual-based models} (IBM)\footnote{The term \emph{agent-based model} can often be found in the litterature in lieu of individual-based model. Both names refer to the same framework and can be used interchangeably. While individual-based model are found more often in biological applications~\parencite{Grimm2005}, no real consensus exists on which term to use. We choose to use the latter throughout this manuscript.}~\parencite{Huston1988}.

    As stated in the name, the goal of an IBM is to model individual-level mechanisms. This is very different from most classical models in ecology where the emphasis is mainly put on population dynamics~\parencite{Grimm2005}. This does not mean that research in IBMs do not deal with population dynamics but rather that these dynamics are studied as a consequence from the interactions between individuals. To put it more simply the main focus of an IBM is to study the collective dynamics emerging from individual-level interactions (whether with other individuals or the environment). And more importantly, the particularity of an IBM is that these individuals, which are the building blocks of the system, are the result of adaptation: collective properties arise from these (sometimes simple) behaviours.

    IBMs are mostly used in studying biological phenomena for which individual variations, and the assumptions that stem from them, are critical. DeAngelis \& Mooij~\parencite{DeAngelis2005} set forth five axes along which IBMs are used to model mechanistic details in the variations between individuals:

    \begin{description}
        \item[Spatial variability] {While classical models sometimes take into account spatial organization, IBMs allow to model local heterogeneity between individuals.}
        \item[Life cycle] {The variability of ontogentic history can be modeled with finer details by using IBMs than with classical models.}
        \item[Phenotypical variation and plasticity] {DeAngelis \& Mooij showcase the influence of individual experience on the behaviour. In particular, IBMs can be more appropriate to model the interactions of multiple different behaviours than classical (game theoretical) models.}
        \item[Learning] {Learning is obviously a consequence of lifetime interactions which are dependent on individual variations.}
        \item[Genetics and evolution] {The computational power of IBMs can help study complex evolutionary genetics.}
    \end{description}

    Thus IBMs have been widely used in behavioural ecology for very diverse applications~\parencite{DeAngelis2005}. For example, spatial variability has been of great interest for the study of group patterns. Most notably, models on the formation of groups of animals, whether swarms of insects, flocks of birds, herds of mammals or schools of fishes~\parencite{Huth1992, Reynolds1992, Gueron1996, Couzin2002} rely heavely on the framework put forth by IBMs. In particular, aggregation behaviours were found to easily arise from simple local (individual-level) sets of rules, leading to complex collective behaviours. But more generally, IBMs have been used to model ecological phenomena as diverse as the optimal gap between trees in forests models~\parencite{Botkin1972}, movement patterns in prey-predators interactions~\parencite{Smith1991} or differences in foraging between solitary birds and large flocks~\parencite{Toquenaga1995}.

    % This is a perfect illustration of one of the most basic principle of IBMs: emergence. 

    Interplays between IBM and EGT are numerous. Indeed, both methods are focused on the evolution of phenotypes and rely heavily on the ecological features of the system. This led to a great number of research bringing together these two fields "with ease". In particular, it is now common to take spatial interactions into account (e.g. how individuals are located on a graph) when studying the evolution of (mostly altruistic) cooperation~\parencite{Hauert2004}. IBMs also give the possibility to more accurately predict the effects of a finite population size while most models in EGT use infinite population sizes~\parencite{Hauert2009}. Additionally, it is possible to more easily model stochastic or conditional strategies. These ecological features can be modeled with classical game theoretical models but at the cost of increased mathematical complexity~\parencite{Hauert2009}. 

    Moreover, individual-level modeling implies that minimal assumptions are made on the effects of mutations on the evolution of individual behaviours. This makes IBMs an interesting addition to EGT when dealing with the modeling of proximate mechanisms. By putting the emphasis on the invidiual, it is thus possible to clearly study how individual adaptations can lead to the fixation of evolutionary traits at population level. In consequence, some have used IBMs to study the evolution of cooperation. Olson and colleagues have been interested in the evolution of herds. More precisely, while collective aggregation benefits the individuals in the group, it is also costly for them (i.e. sharing ressources and increasing the risk of being spotted by predators). Thus there is an evolutionary question on the evolution of such collective behaviours. They confirmed that the formation of herds could be explained by Hamilton's theory of the selfish herd (i.e. aggregation emerges because every individual tries to put others between itself and the predator)~\parencite{Hamilton1971, Olson2013a}. They also showed that predator confusion through aggregation could explain the evolution of such behaviorus~\parencite{Olson2013}. Additionally, they revealed that predator confusion could also lead to the coevolution of morphology (vision system) and behaviour for both the predators and prey~\parencite{Olson2016}. Finally they showed that group vigilance could lead to the appearance of gregarious foraging behaviours without any kinship relations~\parencite{Olson2014a}. Others have been interested in symbiogenesis, which refers to the creation of a new species through the symbiosis of previously independent species. Watson et al. showed with an IBM that such process could occur without any relatedness between the individuals~\parencite{Watson1992}. Wilder \& Stanley used both an IBM and a classical analytical model to show that altruism could evolve thanks to the creation of ecological niches~\parencite{Wilder2015}.

        % Citer Tarapore2010 ?

        % Il va falloir caser une réflexion plus générale sur les modèles Alife tels qu'AVIDA et Aevol puisque ce qu'on fait c'est de l'Alife, pas de la modélisation de véritables organismes.
        % Pour ça les modèles sont très divers aussi, par exemple AVIDA et Aevol (sans trop s'appesentir ni sur l'un ni sur l'autre) -> Dire que ya un historique Artificial Life là-dessus : Ou plutôt commencer sur le fait que tu PEUX avoir un côté très artificial life (mais est-ce que c'est vraiment du modeling à ce moment-là ? Oui, débatable)
        %     -> En gros la frontière est compliquée
        % Il y a quand même une différence entre de l'IBM pour modéliser des vrais animaux et de l'IBM Artificial Life (donc en gros un peu ce que dit Webb). Va falloir l'expliquer ça à un moment.
        % IBM are diverse ? (genre AVIDA c'est IBM, AEVOL aussi)
        % -> Sometimes closer to reality -> aevol, sometimes further -> AVIDA
        % Si besoin, dans Floreano2010 ya un peu de biblio sur AVIDA (ça sera bien suffisant !)
        % Digital genetics: unravelling the genetic basis of evolution (à garder de côté pour Avida et ALIFE)
        % The ecology of action selection: insights from artificial life Anil K. Seth Pareil (pour ALIFE, pas AVIDA)


    % Here we focus on a particular type of IBMs 
\section{Evolutionary Robotics}     

    \subsection{Individual-Based Modeling and Evolutionary Robotics}

        In this thesis, we focus on a particular type of individual-based models: \emph{evolutionary robotics} (ER)~\parencite{Nolfi2000, Doncieux2015a}. The technical details of this framework have already been covered in the Introduction of the manuscript. As such we want to present in this Section in the reasons for which one could use evolutionary robotics above (or in addition to) any other modeling techniques presented before. Why should evolutionary biologist be interested in using ER ? And why should we use ER in the context of this thesis ?

        % The reasons are in fact very similar to those in favor of IBMs. Individual-based modeling and evolutionary robotics have actually very comparable features that makes them appealing as a framework. Namely, they both model phenomena at the level of the individual in a particular ecological context and put a strong emphasis on the evolution of phenotypical traits. As in IBMs, ER can be used to model spatial organization and local interactions, life cycle dynamics and any kind of phenotypical plasticity~\parencite{Mitri2012}. ER is thus also appropriate in the study of behavioural mechanisms and their impact on evolution. Therefore, the line between ER and IBMs can sometimes be blurry. It can even be argued that some studies conducted in ER could have led to similar conclusions with a "simpler" IBM~\parencite{Mitri2012}.


        % To summarize quickly what we said in the Introduction, behind evolutionary robotics is the idea of using the Darwinian principles of selection and variation to evolve a robot's controler and/or morphology~\parencite{Floreano2010, Doncieux2014}. At its core, evolutionary robotics is thus a design technique which stems from the need to bring an holistic approach to the conception of a robot. Because creating a fully embodied agent is complex, the key principle is to let evolution do the work. So why should evolutionary biologists be interested in using ER ?

        % Caser peut-être ici le paragraphe de l'intro sur l'embodied (quand on cite Mitri2012) ? En gros pour dire que c'est de l'embodied même si c'est du simulé

        % But that does not mean that there is no profound differences that may motivate the use of ER over IBMs. The main difference between these two frameworks is summarized by the following assertion: 

        The main contribution of ER when compared to more general IBMs can be summarized by the following assertion: ER models are IBMs where the individual is an embodied robot~\parencite{Mitri2012}. By definition, robots have a body (physical or simulated). In consequence, this creates an additional level of interactions with the environment. Sensory feedback is also part of a robot's design, which means that there often is imperfect information about the environment. In comparison, IBMs will usually (but not necessarily) provide a global and perfect description of the world. Finally, modeling in ER implies that the environment (whether simulated or not) exists in a bounded space, which again may not be the case in IBMs. All of this can have lasting consequences on the dynamics of a system. When those physical properties are expected to be of importance for the studied phenomenon, it may be advantageous to use ER rather than IBMs. Mitri and colleagues~\parencite{Mitri2009} provided an elegant example of a case where physicial embodiement led to unexpected results. While their study was focused on the evolution of communication between simulated robots for foraging, they found that the aggregation of robots on a foraging site provided additional information that did not require the use of direct communication. More generally, the line between classical IBMs and ER can be blurry. Oftentimes, the differences between both frameworks mainly rest upon terminology and history. Namely, these two techniques come from (at least originally) different communities. As we previously explained, ER is deeply rooted in the field of robotics design. In comparison, a large part of works in IBM is interested in the design of more general multi-agent systems and their applications. While ER and IBM can be very similar, these historical divergences tend to have a lasting effect. Yet, we can simply consider ER models to be a particular instance of IBM as we do here. As such, ER is endowed with similar advantages w.r.t. modeling proximate mechanisms in the evolution of behaviours.

        There has been an extensive, though recent, effort in using ER as a modeling tool for social behaviours as well as evolution~\parencite{Mitri2012, Trianni2014b, Eiben2014, Doncieux2015a}. However there still is a lack of communication between communities which implies that ER research sometimes fail to reach those who could be interested by these findings in the evolutionary biology community. This also means that some works in ER may sometimes focus on questions that are of no particular relevance for evolutionary biologists~\parencite{Trianni2014b, Doncieux2015a}. We now present some of the more significant works in ER that have been interested in modeling the evolution of social behaviours. 

        First, the evolution of communication has been a major subject of interest in ER. The modeling of individual-level interactions is adamant in understanding the evolution of communication. Additionally, the supplementary embodiement of individuals in space can have some unexpected effects on communication behaviours~\parencite{Mitri2009}. Floreano \& colleagues~\parencite{Floreano2007} showed how the evolution of communication could vary depending on the relatedness inside a group of foraging robots. Robots had to correctly choose between a food site and a poison site, where the difference between both sites could only be determined at close range. Communication could easily evolve when there was strong relatedness (i.e. robots were clones of each other). In comparison, when individuals were unrelated, deceptive strategies would also evolve. In a similar setting Mitri et al.~\parencite{Mitri2011} revealed a strong correlation between signal reliability and relatedness between individuals. Related individuals would produce more reliable signals in order to direct others towards the food source. Wischmann, Floreano and Keller~\parencite{Wischmann2012} conducted a study where they observed that purely historical contingencies could lead to divergences in the communication strategies evolved in independant evolutionary runs. They showed in particular that signaling strategies of varying complexity could evolve based on these contingencies. The more complex strategy would not ensure higher performance unless in a competitive setting (in which populations were not originally evolved) between different populations. Finally, Mitri and colleagues~\parencite{Mitri2009} focused on the evolution of both communication and suppression of signaling in a competitive environment. They observed suprising evolutionary dynamics. While robots were quickly selected not to emit light on the food source (because it helps competitors find the food source), signaling was never completely suppressed. They found that it could be explained by the fact that the strength of selection for suppression decreased as information in the signal diminished. Others have been interested in the evolution of swarming behaviours. We talked about this previously during our presentation of IBMs but Olson \& colleagues have studied the evolutionary mechanisms behind the emergence of herding behaviours~\parencite{Olson2013, Olson2013a, Haley2014}. While they categorize their work solely as IBM, it could be argued that their model belongs more precisely to the field of ER.

        In consequence, in a similar way as with IBMs, evolutionary robotics allows to model individual variations and thus study their influence on the evolution of a given evolutionary trait. This implies that we can model the mapping from genotype to phenotype without making critical assumptions about the mechanistic constraints at play. Additionally, in comparison to IBMS the embodiement that comes with ER decreases the assumptions we could make on the exact nature of behaviours. This means that it may be possible for evolution to find surprising solutions to coordination which may not require any particular sensory or communication capabilities. We thus do not want to arbitrarily limit the diversity of possible behaviours. This is why we believe ER to be a fitting framework for the problem studied in this thesis.

        %  This is another evidence of the interplay between the two communities. Quite differently, Elfwing \& Doya~\parencite{Elfwing2014a} have been interested in the evolution of polymorphism, where individuals with different phenotypes coexist in the same population at the same time. More precisely, they simulated an environment filled with energy sources that an individual needs to collect to ensure its survival. Moreover, the individuals had to physically exchange genotypes with other individuals in order to simulate mating and produce offsprings. The individuals could choose between two different strategies, focusing (1) on the energy sources or (2) on tracking mating partners. They observed the evolution of polymorphic evolutionary stable strategies. 

    \subsection{The Evolution of Cooperation in Evolutionary Robotics}

        As previously said, several works have been interested in the modeling of evolutionary biology questions with tools from evolutionary robotics. But some in particular have focused on the evolution of cooperation. As a final Section for this Chapter, we review the works on this subject as to show where we stand in the context of this literature.

        % Again, as cooperation is one of the major puzzle in evolution, a portion of the studies that model evolution in ER has been interested more directly on the emergence of cooperation. 
        As it is classical when studying the evolution of cooperation, most works have been focused on altruism. Waibel \& colleagues~\parencite{Waibel2011} conducted an empirical test of Hamilton's rule\footnote{Hamilton's rule is a way to summarize the effect of kin selection by showing that an altruistic trait may be selected if the following inequation is respected: $rb > c$, where $b$ and $c$ are respectively the fitness benefits on the recipient and costs on the actor of the cooperative interaction and $r$ is the relatedness between the recipient and the actor. In consequence, an altruistic behaviour is favored when the benefits of this behaviour weighted by the relatedness with the actor outweigh the cost of cooperating.}~\parencite{Hamilton1964} for the evolution of altruism in a group of robots. In particular, they designed a foraging task where robots had the possibility to share with others their benefits obtained from foraging. They then tested how the coefficient of relatedness between robots influenced the evolution of altruism (i.e. sharing foraged ressources). They showed that, in this context, Hamilton's rule is indeed quantitatively validated. Similarly in another study they have been interested in the influence of both the genetic composition of groups of robots (homogeneous or heterogeneous) and the level of selection (individual-level or group-level) in the evolution of cooperation~\parencite{Waibel2009}. In particular, they studied the impact of these two criteria on the performance of robots in three different foraging tasks: a solitary one, a cooperative one and an altruistic one (i.e. that required individuals to pay a cost when cooperating). As could be expected, teams where individuals were homogeneous (i.e. where genetical relatedness was equal to $1$) performed better in tasks which required cooperation. Montanier and Bredeche have also studied the evolution of altruism in an \emph{environment-driven} model. Under the environment-driver paradigm, no fitness function is explicitly defined and individuals need to meet with each others so that they can exchange genetic material~\parencite{Bredeche2010}, which is a more "realistic" approach to modeling evolution. In particular, they studied~\parencite{Montanier2011} the evolution of altruism in a foraging setting under a "tragedy of commons" situation~\parencite{Hardin1968}. This means that individuals have to share a common limited ressource to such extent that some individuals may have to die so that the whole population does not go extinct. They showed that altruism can evolve under sufficient genetic relatedness. In another similar study~\parencite{Montanier2013}, these authors validated the existence of a negative correlation between the evolution of altruism and spatial dispersion. More precisely, under low dispersion individuals will tend to interact with other nearby individuals. Thus they interact with individuals that are more genetically related to them, which generates sufficient genetic relatedness so that kin selection can take place~\parencite{VanBaalen1998}. 

        Others have been interested in the evolution of division of labour (or specialization), where individuals specialize between different roles for a particular task. These studies have in particular focused on the evolution of specialization in ants. Ferrante et al.~\parencite{Ferrante2015} proposed an ER model of task-partitioning (where a task has to be done in sequence) in leafcutter ants. In this species, some ants are tasked with cutting leaves and leave them in a storage location from which other ants collect the leaves and bring them back to the nest. They showed that division of labour could evolve when particular environmental features (in their case a slope) could be exploited to reduce switching costs. They thus validated a biological theory about the role of switching costs in the evolution of specialization~\parencite{Duarte2011}. 

        % Tarapore ? -> Bof c'est VRAIMENT pas de l'ER

        In the context of the evolution of mutually beneficial cooperation, the work of Solomon and colleagues~\parencite{Solomon2012} is of particular interest. They are indeed among the few who have been interested in modeling the evolution of between unrelated individuals (i.e. mutually beneficial cooperation). They studied the evolution of signaling strategies in cooperative robots. In particular, they took inspiration from the hunting behaviours of spotted hyenas~\parencite{Smith2012} in the context of competing against lions for the stealing of a prey. They compared the performance of the evolution of two different signaling strategies: (1) one where all individuals can signal to others and (2) another one where only a particular hyena, the flag-bearer, may signal. The latter strategy was revealed to achieve higher coordination between individuals and therefore to increase the benefits of the cooperative action.


\section{Conclusions}

    In conclusion of this Chapter, we do not claim any model to be fundamentally better than the others. As we previously stated in the general Introduction each model is based on assumptions and a certain level of abstraction. The choice of a model is made depending on which assumptions we expect to be of critical importance. Even considering a particular model to be globally more realistic can be tricky; some models simply represent more accurately a particular aspect of the phenomenon. Mitri and colleagues~\parencite{Mitri2012} classified models for the study of social behaviours according to their situatedness, which they defined as "the extent to which individuals are embedded in an environment that they can sense and modify". In this Chapter, our goal was to show that classical models in evolutionary robotics make assumptions on the availability of mutations that we consider to be of importance in the evolution of mutualistic cooperation. In particular, we claim that the appearance of mutant (and thus the bootstrap of cooperation) depends on the proximate mechanisms of coordination. We thus motivated our choice of using individual-based modeling to address this issue. Therefore we can model the mapping between genotype and phenotype and thus study the influence of mechanistic constraints on the ultimate evolution of cooperation. The framework of evolutionary robotics in particular is relevant as we make no assumptions on the nature of the behaviours evolved, which may allow for a higher diversity of coordination strategies.
    % TODO: (see Figure TODO -> La refaire moi-même en mettant ce qui m'intéresse plus précisément).

    In the next two Chapters, we will thus be interested in using ER to study the impact of the mechanics of coordination behaviours on the ultimate evolution of cooperation. First, we focus on comparing the evolution of collective hunting between two individuals in a classical game theoretical model and in evolutionary robotics. In particular we want to reveal the differences between these two approaches with regards to the bootstrap of a cooperative strategy. We just are interested in showing the role of the emergence of cooperation in the transition to cooperation. Then, in a second Chapter, we study more precisely how the nature of coordination strategies influence the emergence of collective actions. We focus on the issue of the optimization of collective hunting under individual selection. Namely, we are interested in the transition from a suboptimal collective equilibrium to the optimal one. We want to how the evolution of different coordination strategies may impact the emergence of such transition thanks to individual selection alone. In both of these studies, no physical robots are used. Real robots could allow to ensure that any result is not attributable to artefacts in our simulation. Furthermore, they would also allow to endow our study with real physics (e.g. friction); we however do not believe that such level of realism to be of critical importance in our case. Moreoever experiments on physical robots are in any case unfortunately too time-consuming to consider using them to such scope~\parencite{Mitri2012, Doncieux2015a}.

    % In the case of the problem studied in this chapter, we need a framework which can model the mechanistic constraints in the evolution of coordination. We previously showed that EGT has been widely used in the context of coordination games, which explains why we take inspiration from the stag hunt. However, as we touched upon in the Introduction, models in EGT tend to make critical assumptions on the availability of mutations. Namely, it is often considered that any given strategy can evolve regardless of the resident strategy. Thus, the problem of convergence, which we expect to be of utmost importance here, is usually ignored. In comparison, we claim that the mutational steps necessary to boostrap cooperation are dependent on the proximate mechanisms of coordination. In adaptive dynamics, this problem is addressed through the concept of convergence stability. In particular, the variations in resident strategies affects the fitness landscape which may hinder the convergence of particular strategies. However, other assumptions are once more made: that the effects of mutations are small. We want to show here that the mechanistics constraints in the evolution of coordination behaviours may prevent the evolution of collective actions. Thus we aim to use a framework where no particular assumptions are made on the effect of mutations in the evolution of coordination strategies.

    % Là faudrait caser un jour une réflexion sur l'abstraction de notre modèle et l'approche animat. En gros répondre à Webb.
